<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paseo Professional Testing Suite</title>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #38ef7d;
            --danger: #eb3349;
            --warning: #f2994a;
            --info: #17a2b8;
            --dark: #1e1e1e;
            --light: #f8f9fa;
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            position: relative;
        }
        
        .header h1 {
            font-size: 3em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #fff, #f8f9fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .main-panel {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .login-section {
            text-align: center;
            padding: 40px;
        }
        
        .input-group {
            margin-bottom: 20px;
            text-align: left;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f2994a 0%, #f2c94c 100%);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .dashboard {
            display: none;
        }
        
        .dashboard.show {
            display: block;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid rgba(102, 126, 234, 0.1);
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }
        
        .card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .metric-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .metric-row:last-child {
            border-bottom: none;
        }
        
        .metric-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .metric-value {
            font-weight: bold;
            color: #333;
        }
        
        .chart-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            stroke-linecap: round;
        }
        
        .tabs {
            display: flex;
            background: #f0f0f0;
            border-radius: var(--border-radius);
            padding: 4px;
            margin-bottom: 20px;
        }
        
        .tab {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .tab.active {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(135deg, var(--success), #32d657);
        }
        
        .notification.error {
            background: linear-gradient(135deg, var(--danger), #f45c43);
        }
        
        .notification.warning {
            background: linear-gradient(135deg, var(--warning), #f2c94c);
        }
        
        .floating-action {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: var(--transition);
            z-index: 999;
        }
        
        .floating-action:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .stat-value {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }
        
        .stat-label {
            font-size: 0.95em;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            z-index: 1;
        }
        
        .stat-change {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 0.8em;
            padding: 4px 8px;
            border-radius: 4px;
            background: rgba(255,255,255,0.2);
        }
        
        .stat-change.positive {
            color: var(--success);
        }
        
        .stat-change.negative {
            color: var(--warning);
        }
        
        .log-area {
            background: var(--dark);
            color: #00ff88;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            padding: 20px;
            border-radius: var(--border-radius);
            height: 400px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid rgba(0,255,136,0.2);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
            font-size: 14px;
            line-height: 1.6;
        }
        
        .log-area::-webkit-scrollbar {
            width: 8px;
        }
        
        .log-area::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.3);
            border-radius: 4px;
        }
        
        .log-area::-webkit-scrollbar-thumb {
            background: rgba(0,255,136,0.3);
            border-radius: 4px;
        }
        
        .log-timestamp {
            color: #888;
            font-weight: bold;
        }
        
        .log-success {
            color: #38ef7d;
        }
        
        .log-error {
            color: #eb3349;
        }
        
        .log-warning {
            color: #f2994a;
        }
        
        .log-info {
            color: #17a2b8;
        }
        
        .progress-bar {
            width: 100%;
            height: 24px;
            background: #f0f0f0;
            border-radius: 12px;
            overflow: hidden;
            margin: 15px 0;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255,255,255,0.3),
                transparent
            );
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .advanced-controls {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }
        
        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-item {
            display: flex;
            flex-direction: column;
        }
        
        .control-item label {
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .control-item input,
        .control-item select {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: var(--transition);
            background: white;
        }
        
        .control-item input:focus,
        .control-item select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .range-slider {
            position: relative;
            height: 40px;
            display: flex;
            align-items: center;
        }
        
        .range-slider input[type="range"] {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }
        
        .range-slider input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        
        .range-value {
            position: absolute;
            top: -25px;
            right: 0;
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-connected { background: #38ef7d; }
        .status-disconnected { background: #eb3349; }
        .status-testing { background: #f2994a; animation: pulse 1s infinite; }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .hidden { display: none; }
        .show { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Paseo Blockchain Testing Suite</h1>
            <p>Advanced Stress Testing & Performance Analysis</p>
        </div>
        
        <div class="main-panel">
            <!-- Login Section -->
            <div id="loginSection" class="login-section">
                <h2>üîê Connect Wallet</h2>
                <p style="margin: 20px 0; color: #666;">Enter your private key to access the testing suite</p>
                
                <div class="input-group">
                    <label for="privateKey">Private Key</label>
                    <input type="password" id="privateKey" placeholder="0x..." oninput="validatePrivateKey()">
                    <small style="color: #666; margin-top: 5px; display: block;">Enter your 32-byte private key (64 hex characters, with or without 0x prefix)</small>
                    <div id="keyValidation" style="color: #666; margin-top: 5px; font-size: 0.9em;"></div>
                </div>
                
                <div class="input-group">
                    <label for="rpcUrl">RPC URL</label>
                    <input type="text" id="rpcUrl" value="https://testnet-passet-hub-eth-rpc.polkadot.io">
                </div>
                
                <button class="btn btn-primary" onclick="connectWallet()">
                    <i class="fas fa-plug"></i> Connect Wallet
                </button>
                <button class="btn btn-warning" onclick="testConnection()" style="margin-left: 10px;">
                    <i class="fas fa-wifi"></i> Test RPC
                </button>
                <div id="connectionStatus"></div>
            </div>
            
            <!-- Dashboard -->
            <div id="dashboard" class="dashboard">
                <!-- Header Status Bar -->
                <div class="card" style="margin-bottom: 30px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center;">
                            <span class="status-indicator status-connected" id="statusIndicator"></span>
                            <span id="connectionStatus" style="font-weight: 600;">Connected to Paseo Testnet</span>
                            <span style="margin-left: 20px; color: #666;">
                                <i class="fas fa-network-wired"></i> Chain ID: 420420422
                            </span>
                        </div>
                        <div>
                            <button class="btn btn-primary" onclick="exportData()" style="margin-right: 10px;">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-danger" onclick="disconnect()">
                                <i class="fas fa-sign-out-alt"></i> Disconnect
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Advanced Statistics -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="childContracts">0</div>
                        <div class="stat-label">Child Contracts</div>
                        <div class="stat-change positive" id="contractChange">+0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalTransactions">0</div>
                        <div class="stat-label">Total Transactions</div>
                        <div class="stat-change positive" id="txChange">+0/s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="testIntensity">50%</div>
                        <div class="stat-label">Test Intensity</div>
                        <div class="stat-change" id="intensityStatus">Active</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="currentBlock">0</div>
                        <div class="stat-label">Current Block</div>
                        <div class="stat-change" id="blockTime">--ms</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="gasPrice">--</div>
                        <div class="stat-label">Gas Price (gwei)</div>
                        <div class="stat-change" id="gasTrend">--</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="testDuration">0:00</div>
                        <div class="stat-label">Test Duration</div>
                        <div class="stat-change" id="testStatus">Ready</div>
                    </div>
                </div>
                
                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('controls')">
                        <i class="fas fa-sliders-h"></i> Controls
                    </button>
                    <button class="tab" onclick="switchTab('monitoring')">
                        <i class="fas fa-chart-line"></i> Monitoring
                    </button>
                    <button class="tab" onclick="switchTab('advanced')">
                        <i class="fas fa-cogs"></i> Advanced
                    </button>
                    <button class="tab" onclick="switchTab('reports')">
                        <i class="fas fa-file-alt"></i> Reports
                    </button>
                </div>
                
                <!-- Tab Contents -->
                <div id="controls-tab" class="tab-content active">
                    <div class="grid">
                        <div class="card">
                            <h3><i class="fas fa-cube"></i> Contract Management</h3>
                            <div class="metric-row">
                                <span class="metric-label">Deploy Status</span>
                                <span class="metric-value" id="deployStatus">Ready</span>
                            </div>
                            <button class="btn btn-success" onclick="createChildContracts()">
                                <i class="fas fa-plus-circle"></i> Create 10 Child Contracts
                            </button>
                            <button class="btn btn-primary" onclick="createTokenEconomy()">
                                <i class="fas fa-coins"></i> Create Token Economy
                            </button>
                            <button class="btn btn-warning" onclick="batchDeploy()">
                                <i class="fas fa-rocket"></i> Batch Deploy (20)
                            </button>
                        </div>
                        
                        <div class="card">
                            <h3><i class="fas fa-bolt"></i> Stress Testing</h3>
                            <div class="range-slider">
                                <label>Intensity: <span id="intensityDisplay">50</span>%</label>
                                <input type="range" id="intensity" min="1" max="100" value="50" oninput="updateIntensity(this.value)">
                                <div class="range-value" id="rangeValue">50</div>
                            </div>
                            <button class="btn btn-warning" onclick="startStressTest()">
                                <i class="fas fa-play"></i> Start Stress Test
                            </button>
                            <button class="btn btn-danger" onclick="stopStressTest()">
                                <i class="fas fa-stop"></i> Stop Test
                            </button>
                            <button class="btn btn-primary" onclick="emergencyStop()">
                                <i class="fas fa-exclamation-triangle"></i> Emergency Stop
                            </button>
                        </div>
                        
                        <div class="card">
                            <h3><i class="fas fa-tachometer-alt"></i> Load Testing</h3>
                            <div class="input-group">
                                <label for="txCount">Transaction Count:</label>
                                <input type="number" id="txCount" value="100" min="10" max="500">
                            </div>
                            <button class="btn btn-primary" onclick="executeLoadTest()">
                                <i class="fas fa-rocket"></i> Execute Load Test
                            </button>
                            <button class="btn btn-success" onclick="executeDistributedTest()">
                                <i class="fas fa-project-diagram"></i> Distributed Test
                            </button>
                            <button class="btn btn-warning" onclick="simulatedRush()">
                                <i class="fas fa-fire"></i> Simulated Rush Hour
                            </button>
                        </div>
                        
                        <div class="card">
                            <h3><i class="fas fa-chart-bar"></i> Performance Analysis</h3>
                            <div class="metric-row">
                                <span class="metric-label">TPS</span>
                                <span class="metric-value" id="currentTPS">0.0</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Avg Gas/tx</span>
                                <span class="metric-value" id="avgGas">--</span>
                            </div>
                            <button class="btn btn-primary" onclick="benchmarkPerformance()">
                                <i class="fas fa-stopwatch"></i> Run Benchmark
                            </button>
                            <button class="btn btn-success" onclick="optimizeSettings()">
                                <i class="fas fa-magic"></i> Auto-Optimize
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="monitoring-tab" class="tab-content">
                    <div class="grid">
                        <div class="chart-container" style="grid-column: span 2;">
                            <h3><i class="fas fa-chart-line"></i> Real-time Performance</h3>
                            <canvas id="performanceChart" width="400" height="200"></canvas>
                        </div>
                        <div class="chart-container" style="grid-column: span 2;">
                            <h3><i class="fas fa-chart-area"></i> Transaction Volume</h3>
                            <canvas id="volumeChart" width="400" height="200"></canvas>
                        </div>
                        <div class="chart-container">
                            <h3><i class="fas fa-chart-pie"></i> Test Distribution</h3>
                            <canvas id="distributionChart" width="400" height="300"></canvas>
                        </div>
                    </div>
                </div>
                
                <div id="advanced-tab" class="tab-content">
                    <div class="advanced-controls">
                        <h3><i class="fas fa-cogs"></i> Advanced Configuration</h3>
                        <div class="control-group">
                            <div class="control-item">
                                <label>Test Duration (blocks)</label>
                                <input type="number" id="testDuration" value="100" min="10" max="1000">
                            </div>
                            <div class="control-item">
                                <label>Max Concurrent TX</label>
                                <input type="number" id="maxConcurrent" value="50" min="1" max="200">
                            </div>
                            <div class="control-item">
                                <label>Gas Limit Multiplier</label>
                                <input type="number" id="gasMultiplier" value="1.2" min="1" max="3" step="0.1">
                            </div>
                            <div class="control-item">
                                <label>Test Mode</label>
                                <select id="testMode">
                                    <option value="normal">Normal</option>
                                    <option value="aggressive">Aggressive</option>
                                    <option value="conservative">Conservative</option>
                                    <option value="extreme">Extreme Stress</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn btn-warning" onclick="applyAdvancedSettings()">
                            <i class="fas fa-save"></i> Apply Settings
                        </button>
                        <button class="btn btn-danger" onclick="resetSettings()">
                            <i class="fas fa-undo"></i> Reset to Default
                        </button>
                    </div>
                    
                    <div class="card">
                        <h3><i class="fas fa-terminal"></i> Advanced Commands</h3>
                        <button class="btn btn-primary" onclick="networkProbe()">
                            <i class="fas fa-search"></i> Network Probe
                        </button>
                        <button class="btn btn-success" onclick="simulateBurst()">
                            <i class="fas fa-bolt"></i> Transaction Burst
                        </button>
                        <button class="btn btn-warning" onclick="stressNodes()">
                            <i class="fas fa-server"></i> Stress Nodes
                        </button>
                        <button class="btn btn-danger" onclick="simulateFailure()">
                            <i class="fas fa-exclamation-triangle"></i> Simulate Failure
                        </button>
                    </div>
                </div>
                
                <div id="reports-tab" class="tab-content">
                    <div class="grid">
                        <div class="card">
                            <h3><i class="fas fa-file-export"></i> Export Options</h3>
                            <button class="btn btn-primary" onclick="exportJSON()">
                                <i class="fas fa-code"></i> Export JSON
                            </button>
                            <button class="btn btn-success" onclick="exportCSV()">
                                <i class="fas fa-file-csv"></i> Export CSV
                            </button>
                            <button class="btn btn-warning" onclick="generateReport()">
                                <i class="fas fa-file-pdf"></i> Generate PDF Report
                            </button>
                            <button class="btn btn-primary" onclick="shareReport()">
                                <i class="fas fa-share"></i> Share Report
                            </button>
                        </div>
                        
                        <div class="card">
                            <h3><i class="fas fa-history"></i> Recent Tests</h3>
                            <div id="recentTests" style="max-height: 300px; overflow-y: auto;">
                                <p style="color: #666;">No recent tests</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Progress Bar -->
                <div class="card">
                    <h3><i class="fas fa-tasks"></i> Current Operations</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="testProgress"></div>
                    </div>
                    <div id="operationStatus" style="margin-top: 10px; color: #666;">No active operations</div>
                </div>
                
                <!-- Enhanced Log Area -->
                <div class="card">
                    <h3><i class="fas fa-terminal"></i> System Console</h3>
                    <div class="log-area" id="logArea">
                        <span class="log-timestamp">[00:00:00]</span> <span class="log-info">‚ÑπÔ∏è</span> Professional Testing Suite initialized. Ready for advanced testing operations.
                    </div>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-primary" onclick="clearLogs()">
                            <i class="fas fa-eraser"></i> Clear Logs
                        </button>
                        <button class="btn btn-success" onclick="downloadLogs()">
                            <i class="fas fa-download"></i> Download Logs
                        </button>
                        <button class="btn btn-warning" onclick="toggleLogLevel()">
                            <i class="fas fa-filter"></i> Toggle Log Level
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Floating Action Button -->
            <button class="floating-action" onclick="quickAction()">
                <i class="fas fa-bolt"></i>
            </button>
            
            <!-- Notification Container -->
            <div id="notification" class="notification"></div>
        </div>
    </div>

    <script>
        let provider;
        let wallet;
        let testingSuite;
        let tokenFactory;
        let isTestRunning = false;
        let performanceChart, volumeChart, distributionChart;
        let statsHistory = [];
        let testStartTime;
        let recentTests = [];
        let currentLogLevel = 'all';
        
        // Chart configurations
        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            animation: {
                duration: 750
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.05)'
                    }
                },
                x: {
                    grid: {
                        display: false
                    }
                }
            }
        };
        
        // Contract ABIs (simplified)
        const testingSuiteABI = [
            "function createChildren(uint256 count)",
            "function startTest(uint256 intensity)",
            "function executeLoadTest(uint256 txCount)",
            "function executeDistributedTest()",
            "function stopTest()",
            "function getStats() view returns (uint256 children, uint256 txs, uint256 currentBlock, uint256 blocksElapsed, bool active)",
            "function childContractCount() view returns (uint256)",
            "function totalTransactions() view returns (uint256)"
        ];
        
        const tokenFactoryABI = [
            "function createTestTokens(uint256 count)",
            "function distributeTokens(address token, address[] memory recipients)",
            "function getTokenCount() view returns (uint256)"
        ];
        
        function log(message, type = 'info') {
            const logArea = document.getElementById('logArea');
            const timestamp = new Date().toLocaleTimeString();
            const icon = {
                'info': '‚ÑπÔ∏è',
                'success': '‚úÖ',
                'error': '‚ùå',
                'warning': '‚ö†Ô∏è'
            }[type] || '‚ÑπÔ∏è';
            
            const logEntry = document.createElement('div');
            logEntry.innerHTML = `<span class="log-timestamp">[${timestamp}]</span> <span class="log-${type}">${icon}</span> ${message}`;
            logArea.appendChild(logEntry);
            logArea.scrollTop = logArea.scrollHeight;
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.className = `notification ${type} show`;
            notification.textContent = message;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${tabName}-tab`).classList.add('active');
            event.target.classList.add('active');
            
            // Initialize charts if monitoring tab
            if (tabName === 'monitoring') {
                initializeCharts();
            }
        }
        
        function initializeCharts() {
            // Performance Chart
            if (!performanceChart) {
                const perfCtx = document.getElementById('performanceChart').getContext('2d');
                performanceChart = new Chart(perfCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'TPS',
                            data: [],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Gas Usage',
                            data: [],
                            borderColor: '#764ba2',
                            backgroundColor: 'rgba(118, 75, 162, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: chartOptions
                });
            }
            
            // Volume Chart
            if (!volumeChart) {
                const volCtx = document.getElementById('volumeChart').getContext('2d');
                volumeChart = new Chart(volCtx, {
                    type: 'bar',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Transactions',
                            data: [],
                            backgroundColor: 'rgba(56, 239, 125, 0.8)'
                        }]
                    },
                    options: chartOptions
                });
            }
            
            // Distribution Chart
            if (!distributionChart) {
                const distCtx = document.getElementById('distributionChart').getContext('2d');
                distributionChart = new Chart(distCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Load Test', 'Stress Test', 'Distributed Test', 'Other'],
                        datasets: [{
                            data: [25, 25, 25, 25],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2', 
                                '#38ef7d',
                                '#f2994a'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }
        
        function updateCharts() {
            if (!performanceChart) return;
            
            const now = new Date().toLocaleTimeString();
            const tps = Math.random() * 10; // Simulate TPS
            const gas = Math.random() * 100000; // Simulate gas
            
            // Update performance chart
            if (performanceChart.data.labels.length > 20) {
                performanceChart.data.labels.shift();
                performanceChart.data.datasets[0].data.shift();
                performanceChart.data.datasets[1].data.shift();
            }
            
            performanceChart.data.labels.push(now);
            performanceChart.data.datasets[0].data.push(tps);
            performanceChart.data.datasets[1].data.push(gas / 1000);
            performanceChart.update();
            
            // Update volume chart
            if (volumeChart.data.labels.length > 10) {
                volumeChart.data.labels.shift();
                volumeChart.data.datasets[0].data.shift();
            }
            
            volumeChart.data.labels.push(now);
            volumeChart.data.datasets[0].data.push(Math.floor(Math.random() * 100));
            volumeChart.update();
        }
        
        async function connectWallet() {
            try {
                console.log('Connect wallet called');
                
                const privateKey = document.getElementById('privateKey').value.trim();
                const rpcUrl = document.getElementById('rpcUrl').value.trim();
                
                console.log('Private key length:', privateKey.length);
                console.log('Private key format:', privateKey.startsWith('0x') ? 'hex' : 'raw');
                console.log('RPC URL:', rpcUrl);
                
                if (!privateKey) {
                    log('‚ùå Please enter private key', 'error');
                    return;
                }
                
                if (!rpcUrl) {
                    log('‚ùå Please enter RPC URL', 'error');
                    return;
                }
                
                // Validate private key format
                let formattedKey = privateKey;
                if (!privateKey.startsWith('0x')) {
                    formattedKey = '0x' + privateKey;
                    console.log('Added 0x prefix to private key');
                }
                
                // Check if private key is valid length
                if (formattedKey.length !== 66) { // 0x + 64 hex chars
                    log('‚ùå Invalid private key format. Should be 32 bytes (64 hex chars)', 'error');
                    return;
                }
                
                // Show loading state
                log('üîÑ Connecting to network...', 'info');
                showNotification('Connecting...', 'info');
                
                // Test RPC first
                log('üåê Testing RPC connection...', 'info');
                const testProvider = new ethers.providers.JsonRpcProvider(rpcUrl);
                const testBlock = await testProvider.getBlockNumber();
                console.log('RPC test successful, block:', testBlock);
                
                // Create provider with chain info
                provider = new ethers.providers.JsonRpcProvider(rpcUrl, {
                    chainId: 420420422,
                    name: 'paseo-testnet'
                });
                
                // Create wallet
                console.log('Creating wallet with key...');
                wallet = new ethers.Wallet(formattedKey, provider);
                
                console.log('Wallet created:', wallet.address);
                
                // Test connection
                log('üîç Testing wallet connection...', 'info');
                const balance = await wallet.getBalance();
                const blockNumber = await provider.getBlockNumber();
                const network = await provider.getNetwork();
                
                console.log('Balance:', balance.toString());
                console.log('Block number:', blockNumber);
                console.log('Network:', network);
                
                // Check if chain ID matches
                if (network.chainId !== 420420422) {
                    log(`‚ö†Ô∏è Warning: Chain ID mismatch. Expected 420420422, got ${network.chainId}`, 'warning');
                }
                
                log('‚úÖ Successfully connected to Paseo testnet', 'success');
                log(`üìç Wallet Address: ${wallet.address}`, 'info');
                log(`üí∞ Balance: ${ethers.utils.formatEther(balance)} PAS`, 'info');
                log(`üì¶ Current Block: ${blockNumber}`, 'info');
                log(`üåê Chain ID: ${network.chainId}`, 'info');
                
                showNotification('Connected successfully!', 'success');
                
                // Update UI
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                document.getElementById('statusIndicator').className = 'status-indicator status-connected';
                document.getElementById('connectionStatus').textContent = 'Connected to Paseo';
                
                // Initialize contracts
                await initializeContracts();
                
            } catch (error) {
                console.error('Connection error:', error);
                log(`‚ùå Connection failed: ${error.message}`, 'error');
                
                // More specific error handling
                if (error.message.includes('invalid private key')) {
                    log('‚ùå Invalid private key. Please check your private key format.', 'error');
                } else if (error.message.includes('network')) {
                    log('‚ùå Network connection failed. Check RPC URL.', 'error');
                } else if (error.message.includes('insufficient funds')) {
                    log('‚ùå Insufficient balance for gas fees.', 'error');
                }
                
                showNotification('Connection failed!', 'error');
            }
        }
        
        async function initializeContracts() {
            try {
                console.log('Initializing contracts...');
                
                // TokenFactory already deployed
                const TOKEN_FACTORY_ADDRESS = "0x39ca236cb8131f6748d3862bb574f24a10e1c38d";
                const TESTING_SUITE_ADDRESS = "0x7a637dc8cbfb49edc55fbe97fab0b0824c163605";
                
                console.log('TokenFactory address:', TOKEN_FACTORY_ADDRESS);
                console.log('TestingSuite address:', TESTING_SUITE_ADDRESS);
                
                tokenFactory = new ethers.Contract(TOKEN_FACTORY_ADDRESS, tokenFactoryABI, wallet);
                testingSuite = new ethers.Contract(TESTING_SUITE_ADDRESS, testingSuiteABI, wallet);
                
                console.log('Contracts created');
                
                log('‚úÖ All contracts initialized successfully', 'success');
                
                // Test contracts
                const childCount = await testingSuite.childContractCount();
                const totalTx = await testingSuite.totalTransactions();
                
                log(`üìä Initial stats - Contracts: ${childCount.toString()}, Transactions: ${totalTx.toString()}`, 'info');
                
                await refreshStats();
                
            } catch (error) {
                console.error('Contract initialization error:', error);
                log(`‚ùå Contract initialization failed: ${error.message}`, 'error');
            }
        }
        }
        
        async function createChildContracts() {
            if (!testingSuite) {
                log('‚ùå Testing suite not initialized');
                return;
            }
            
            try {
                log('üèóÔ∏è Creating child contracts...');
                const tx = await testingSuite.createChildren(10);
                log(`üì§ Transaction sent: ${tx.hash}`);
                
                const receipt = await tx.wait();
                log(`‚úÖ Confirmed! Block: ${receipt.blockNumber}`);
                
                await refreshStats();
            } catch (error) {
                log(`‚ùå Failed: ${error.message}`);
            }
        }
        
        async function startStressTest() {
            if (!testingSuite) {
                log('‚ùå Testing suite not initialized');
                return;
            }
            
            try {
                const intensity = document.getElementById('intensity').value;
                log(`‚ö° Starting stress test at ${intensity}% intensity`);
                
                const tx = await testingSuite.startTest(intensity);
                log(`üì§ Transaction sent: ${tx.hash}`);
                
                isTestRunning = true;
                updateTestProgress(0);
                await tx.wait();
                
                log('‚úÖ Stress test started!');
                
            } catch (error) {
                log(`‚ùå Failed: ${error.message}`);
            }
        }
        
        async function executeLoadTest() {
            if (!testingSuite) {
                log('‚ùå Testing suite not initialized');
                return;
            }
            
            try {
                const txCount = document.getElementById('txCount').value;
                log(`üöÄ Executing ${txCount} transactions...`);
                
                const tx = await testingSuite.executeLoadTest(txCount);
                log(`üì§ Transaction sent: ${tx.hash}`);
                
                const receipt = await tx.wait();
                log(`‚úÖ Load test completed! Gas used: ${receipt.gasUsed.toString()}`);
                
                await refreshStats();
            } catch (error) {
                log(`‚ùå Failed: ${error.message}`);
            }
        }
        
        async function executeDistributedTest() {
            if (!testingSuite) {
                log('‚ùå Testing suite not initialized');
                return;
            }
            
            try {
                log('üåê Executing distributed test...');
                const tx = await testingSuite.executeDistributedTest();
                log(`üì§ Transaction sent: ${tx.hash}`);
                
                await tx.wait();
                log('‚úÖ Distributed test completed!');
                
                await refreshStats();
            } catch (error) {
                log(`‚ùå Failed: ${error.message}`);
            }
        }
        
        async function stopStressTest() {
            if (!testingSuite) {
                log('‚ùå Testing suite not initialized');
                return;
            }
            
            try {
                log('üõë Stopping stress test...');
                const tx = await testingSuite.emergencyStopTest();
                await tx.wait();
                
                isTestRunning = false;
                log('‚úÖ Stress test stopped');
            } catch (error) {
                log(`‚ùå Failed: ${error.message}`);
            }
        }
        
        async function refreshStats() {
            if (!testingSuite) {
                console.log('Testing suite not initialized');
                return;
            }
            
            try {
                console.log('Refreshing stats...');
                
                const stats = await testingSuite.getStats();
                const childCount = await testingSuite.childContractCount();
                const totalTx = await testingSuite.totalTransactions();
                
                console.log('Stats received:', stats);
                
                document.getElementById('childContracts').textContent = childCount.toString();
                document.getElementById('totalTransactions').textContent = totalTx.toString();
                document.getElementById('currentBlock').textContent = stats.currentBlock.toString();
                
                // Update additional stats
                document.getElementById('contractChange').textContent = `+${Math.floor(Math.random() * 20)}%`;
                document.getElementById('txChange').textContent = `+${(Math.random() * 5).toFixed(1)}/s`;
                document.getElementById('intensityStatus').textContent = stats.active ? 'Active' : 'Inactive';
                
                console.log('UI updated');
                
            } catch (error) {
                console.error('Refresh stats error:', error);
                log(`‚ùå Failed to refresh stats: ${error.message}`, 'error');
            }
        }
        }
        
        function updateIntensity(value) {
            document.getElementById('intensityValue').textContent = value;
            document.getElementById('intensityDisplay').textContent = value;
            document.getElementById('rangeValue').textContent = value;
            document.getElementById('testIntensity').textContent = value + '%';
        }
        
        function updateTestProgress(percentage) {
            document.getElementById('testProgress').style.width = percentage + '%';
            document.getElementById('operationStatus').textContent = `Operation in progress: ${Math.round(percentage)}%`;
        }
        
        function updateDuration() {
            if (!testStartTime) return;
            
            const duration = Math.floor((Date.now() - testStartTime) / 1000);
            const minutes = Math.floor(duration / 60);
            const seconds = duration % 60;
            document.getElementById('testDuration').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function updateGasPrice() {
            if (!provider) return;
            
            provider.getGasPrice().then(gasPrice => {
                const gasInGwei = ethers.utils.formatUnits(gasPrice, 'gwei');
                document.getElementById('gasPrice').textContent = gasInGwei;
                document.getElementById('gasTrend').textContent = Math.random() > 0.5 ? '‚Üë' : '‚Üì';
            });
        }
        
        function calculateTPS() {
            const currentTx = parseInt(document.getElementById('totalTransactions').textContent);
            const blocksElapsed = parseInt(document.getElementById('currentBlock').textContent) - (testStartTime || 0);
            const tps = blocksElapsed > 0 ? (currentTx / blocksElapsed).toFixed(2) : '0.0';
            document.getElementById('currentTPS').textContent = tps;
        }
        
        function updateBlockTime() {
            const lastBlock = parseInt(localStorage.getItem('lastBlock') || '0');
            const currentBlock = parseInt(document.getElementById('currentBlock').textContent);
            
            if (lastBlock > 0) {
                const blockTime = Math.random() * 3000; // Simulate block time
                document.getElementById('blockTime').textContent = `${blockTime.toFixed(0)}ms`;
            }
            
            localStorage.setItem('lastBlock', currentBlock.toString());
        }
        
        // Advanced Functions
        async function batchDeploy() {
            log('üöÄ Starting batch deployment of 20 contracts...', 'info');
            try {
                const batchSize = 5;
                for (let i = 0; i < 4; i++) {
                    await createChildContracts();
                    updateTestProgress((i + 1) * 25);
                    await new Promise(resolve => setTimeout(resolve, 2000));
                }
                log('‚úÖ Batch deployment completed', 'success');
                showNotification('Batch deployment successful!', 'success');
            } catch (error) {
                log(`‚ùå Batch deployment failed: ${error.message}`, 'error');
            }
        }
        
        async function benchmarkPerformance() {
            log('‚è±Ô∏è Running performance benchmark...', 'info');
            const startTime = Date.now();
            
            try {
                // Simulate benchmark
                for (let i = 0; i < 5; i++) {
                    await executeLoadTest();
                    updateTestProgress((i + 1) * 20);
                }
                
                const duration = Date.now() - startTime;
                log(`‚úÖ Benchmark completed in ${duration}ms`, 'success');
                showNotification(`Benchmark: ${duration}ms`, 'success');
                
                // Save to recent tests
                recentTests.unshift({
                    type: 'Benchmark',
                    duration: duration,
                    timestamp: new Date().toLocaleString()
                });
                updateRecentTests();
            } catch (error) {
                log(`‚ùå Benchmark failed: ${error.message}`, 'error');
            }
        }
        
        function updateRecentTests() {
            const container = document.getElementById('recentTests');
            if (recentTests.length === 0) {
                container.innerHTML = '<p style="color: #666;">No recent tests</p>';
                return;
            }
            
            container.innerHTML = recentTests.slice(0, 10).map(test => `
                <div class="metric-row">
                    <span class="metric-label">${test.type}</span>
                    <span class="metric-value">${test.timestamp}</span>
                </div>
            `).join('');
        }
        
        function applyAdvancedSettings() {
            const settings = {
                duration: document.getElementById('testDuration').value,
                concurrent: document.getElementById('maxConcurrent').value,
                gasMultiplier: document.getElementById('gasMultiplier').value,
                mode: document.getElementById('testMode').value
            };
            
            localStorage.setItem('advancedSettings', JSON.stringify(settings));
            log('‚öôÔ∏è Advanced settings applied', 'success');
            showNotification('Settings saved!', 'success');
        }
        
        function resetSettings() {
            document.getElementById('testDuration').value = 100;
            document.getElementById('maxConcurrent').value = 50;
            document.getElementById('gasMultiplier').value = 1.2;
            document.getElementById('testMode').value = 'normal';
            
            localStorage.removeItem('advancedSettings');
            log('üîÑ Settings reset to default', 'warning');
            showNotification('Settings reset!', 'warning');
        }
        
        async function simulatedRush() {
            log('üî• Simulating rush hour traffic...', 'warning');
            try {
                for (let i = 0; i < 10; i++) {
                    await executeLoadTest();
                    updateTestProgress((i + 1) * 10);
                }
                log('‚úÖ Rush hour simulation completed', 'success');
            } catch (error) {
                log(`‚ùå Rush hour simulation failed: ${error.message}`, 'error');
            }
        }
        
        function exportJSON() {
            const data = {
                timestamp: new Date().toISOString(),
                stats: {
                    contracts: document.getElementById('childContracts').textContent,
                    transactions: document.getElementById('totalTransactions').textContent,
                    intensity: document.getElementById('testIntensity').textContent,
                    tps: document.getElementById('currentTPS').textContent
                },
                recentTests: recentTests
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `test-report-${Date.now()}.json`;
            a.click();
            
            log('üìä Report exported as JSON', 'success');
            showNotification('JSON report exported!', 'success');
        }
        
        function clearLogs() {
            document.getElementById('logArea').innerHTML = 
                '<span class="log-timestamp">[' + new Date().toLocaleTimeString() + ']</span> <span class="log-info">‚ÑπÔ∏è</span> Console cleared.';
            showNotification('Logs cleared!', 'info');
        }
        
        function downloadLogs() {
            const logContent = document.getElementById('logArea').innerText;
            const blob = new Blob([logContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `logs-${Date.now()}.txt`;
            a.click();
            
            showNotification('Logs downloaded!', 'success');
        }
        
        function validatePrivateKey() {
            const input = document.getElementById('privateKey').value.trim();
            const validation = document.getElementById('keyValidation');
            
            if (!input) {
                validation.textContent = '';
                validation.style.color = '#666';
                return;
            }
            
            let formattedKey = input;
            if (!input.startsWith('0x')) {
                formattedKey = '0x' + input;
            }
            
            if (formattedKey.length === 66) {
                validation.textContent = '‚úì Valid private key format';
                validation.style.color = '#38ef7d';
            } else if (formattedKey.length < 66) {
                validation.textContent = `‚ö† Too short (${formattedKey.length}/66 characters)`;
                validation.style.color = '#f2994a';
            } else {
                validation.textContent = `‚úó Too long (${formattedKey.length}/66 characters)`;
                validation.style.color = '#eb3349';
            }
        }
        
        function quickAction() {
            if (!isTestRunning) {
                startStressTest();
            } else {
                stopStressTest();
            }
        }
        
        function emergencyStop() {
            log('üö® EMERGENCY STOP ACTIVATED!', 'error');
            stopStressTest();
            showNotification('Emergency stop activated!', 'error');
        }
        
        function disconnect() {
            console.log('Disconnecting...');
            
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('dashboard').style.display = 'none';
            provider = null;
            wallet = null;
            testingSuite = null;
            tokenFactory = null;
            
            log('üîå Disconnected from wallet', 'warning');
            showNotification('Disconnected!', 'warning');
        }
        
        function generateReport() {
            const report = `
=== TESTING REPORT ===
Timestamp: ${new Date().toLocaleString()}
Network: Paseo Testnet
Chain ID: 420420422
Wallet: ${wallet ? wallet.address : 'Not connected'}

Current Statistics:
- Child Contracts: ${document.getElementById('childContracts').textContent}
- Total Transactions: ${document.getElementById('totalTransactions').textContent}
- Test Intensity: ${document.getElementById('testIntensity').textContent}
- Current Block: ${document.getElementById('currentBlock').textContent}

Test Status: ${isTestRunning ? 'RUNNING' : 'STOPPED'}

=== END REPORT ===`;
            
            log(report);
        }
        
        // Auto-refresh stats every 2 seconds
        setInterval(() => {
            if (wallet && testingSuite) {
                refreshStats();
                updateGasPrice();
                updateDuration();
                calculateTPS();
                updateBlockTime();
            }
            
            if (performanceChart && document.getElementById('monitoring-tab') && 
                document.getElementById('monitoring-tab').classList.contains('active')) {
                updateCharts();
            }
        }, 2000);
        
        // Initialize on load
        window.addEventListener('load', () => {
            // Load saved settings
            const savedSettings = localStorage.getItem('advancedSettings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                document.getElementById('testDuration').value = settings.duration || 100;
                document.getElementById('maxConcurrent').value = settings.concurrent || 50;
                document.getElementById('gasMultiplier').value = settings.gasMultiplier || 1.2;
                document.getElementById('testMode').value = settings.mode || 'normal';
            }
        });
    </script>
</body>
</html>