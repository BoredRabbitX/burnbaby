<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>TERMINAL_BURN_v1.0</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    <style>
        :root { --neon: #00ff41; --dim: #003b00; --bg: #050505; }
        body { background: var(--bg); color: var(--neon); font-family: 'Courier New', monospace; margin: 0; overflow: hidden; }
        #terminal { display: flex; flex-direction: column; height: 100vh; padding: 20px; box-sizing: border-box; }
        .header { text-shadow: 0 0 10px var(--neon); border-bottom: 2px solid var(--neon); padding-bottom: 10px; margin-bottom: 20px; }
        .grid { display: grid; grid-template-columns: 350px 1fr; gap: 20px; flex-grow: 1; }
        .panel { border: 1px solid var(--neon); padding: 15px; background: rgba(0, 255, 65, 0.05); position: relative; }
        .panel::after { content: "SYS_PANE"; position: absolute; top: -10px; right: 10px; background: var(--bg); padding: 0 5px; font-size: 10px; }
        input { background: transparent; border: 1px solid var(--dim); color: var(--neon); width: 100%; padding: 10px; margin-bottom: 15px; outline: none; box-sizing: border-box; }
        input:focus { border-color: var(--neon); box-shadow: 0 0 5px var(--neon); }
        button { background: var(--neon); color: black; border: none; padding: 15px; width: 100%; font-weight: bold; cursor: pointer; text-transform: uppercase; letter-spacing: 2px; }
        button:hover { background: white; box-shadow: 0 0 20px var(--neon); }
        #console { background: black; border: 1px solid var(--dim); height: 100%; overflow-y: auto; padding: 10px; font-size: 12px; line-height: 1.4; color: #00ff41; }
        .stat-line { margin: 10px 0; font-size: 18px; }
        .stat-val { color: white; }
        .scanline { width: 100%; height: 100px; z-index: 10; background: linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0,255,65,0.02) 50%, rgba(0,0,0,0) 100%); position: absolute; bottom: 100%; animation: scan 4s linear infinite; pointer-events: none; }
        @keyframes scan { from { bottom: 100%; } to { bottom: -100%; } }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: var(--neon); }
    </style>
</head>
<body>
    <div class="scanline"></div>
    <div id="terminal">
        <div class="header">
            [ RUNNING: BURN_PROTOCOL_v1.0 // AUTHORIZED_ACCESS_ONLY ]
        </div>
        
        <div class="grid">
            <div class="panel">
                <div class="stat-line">BALANCE: <span id="balDisp" class="stat-val">0.00</span> BURN</div>
                <div class="stat-line">STATUS: <span id="statusDisp" class="stat-val">IDLE</span></div>
                <div class="stat-line">TX_COUNT: <span id="txCount" class="stat-val">0</span></div>
                <hr style="border: 0.5px solid var(--dim); margin: 20px 0;">
                
                <label>NETWORK RPC:</label>
                <input type="text" id="rpcUrl" value="https://polygon-rpc.com">
                
                <label>SECRET KEY:</label>
                <input type="password" id="privKey" placeholder="0x...">
                
                <label>TARGET CONTRACT:</label>
                <input type="text" id="contractAddr" placeholder="0x...">
                
                <button id="startBtn">Initiate Spam Sequence</button>
            </div>

            <div class="panel" style="display: flex; flex-direction: column;">
                <div id="console">> INITIALIZING... SYSTEM READY.</div>
            </div>
        </div>
    </div>

<script>
    let txCounter = 0;
    const abi = [
        "function trigger() public",
        "function balanceOf(address) view returns (uint256)",
        "function symbol() view returns (string)"
    ];

    const log = (msg, color = "#00ff41") => {
        const c = document.getElementById('console');
        const entry = document.createElement('div');
        entry.innerHTML = `<span style="color: #555">[${new Date().toLocaleTimeString()}]</span> <span style="color: ${color}">${msg}</span>`;
        c.prepend(entry);
    };

    document.getElementById('startBtn').onclick = async () => {
        const rpc = document.getElementById('rpcUrl').value;
        const key = document.getElementById('privKey').value;
        const addr = document.getElementById('contractAddr').value;

        try {
            const provider = new ethers.JsonRpcProvider(rpc);
            const wallet = new ethers.Wallet(key, provider);
            const contract = new ethers.Contract(addr, abi, wallet);

            log("ACCESS GRANTED. DEPLOYING AGENTS...", "#fff");
            document.getElementById('statusDisp').innerText = "SPAMMING";
            document.getElementById('statusDisp').style.color = "#ff0000";

            runSpam(contract, wallet, provider);
        } catch (e) {
            log("CRITICAL_ERROR: " + e.message, "red");
        }
    };

    async function runSpam(contract, wallet, provider) {
        while (true) {
            try {
                log("FETCHING NETWORK PARAMS...");
                
                // TRUCCO 1: Gestione manuale del nonce per evitare code
                const nonce = await provider.getTransactionCount(wallet.address, "latest");
                
                // TRUCCO 2: Gas Multiplier per prioritÃ 
                const feeData = await provider.getFeeData();
                const adjustedGasPrice = (feeData.gasPrice * 120n) / 100n; // +20% gas price

                log(`SENDING TRIGGER [Nonce: ${nonce}]...`);
                
                const tx = await contract.trigger({
                    nonce: nonce,
                    gasPrice: adjustedGasPrice
                });

                log(`TX BROADCASTED: ${tx.hash.substring(0,25)}...`, "#008cff");
                
                await tx.wait();
                txCounter++;
                document.getElementById('txCount').innerText = txCounter;
                
                const bal = await contract.balanceOf(wallet.address);
                document.getElementById('balDisp').innerText = ethers.formatEther(bal);
                
                log("TRANSACTION SUCCESSFUL. COOLING DOWN 61s.", "yellow");
            } catch (e) {
                log("REJECTED: Contract in cooldown o Gas insufficiente.", "#555");
            }
            await new Promise(r => setTimeout(r, 61000));
        }
    }
</script>
</body>
</html>
