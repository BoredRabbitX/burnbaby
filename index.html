<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HBURN_v30.7_STABLE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.13.2/ethers.umd.min.js"></script>
    <style>
        :root { --p: #00ff88; --s: #ff3366; --bg: #000; --glass: rgba(10, 10, 12, 0.98); --net: #008cff; --xcm: #e6007a; --dim: #555; }
        * { box-sizing: border-box; transition: all 0.2s ease; }
        body, html { margin: 0; padding: 0; height: 100vh; background: var(--bg); color: #fff; font-family: 'JetBrains Mono', monospace; overflow: hidden; display: flex; justify-content: center; align-items: center; }

        #canvas { position: fixed; top: 0; left: 0; z-index: 1; opacity: 0.25; pointer-events: none; }

        /* LOGIN MINIMALISTA */
        #auth { position: fixed; inset: 0; background: #000; z-index: 1000; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .auth-card { width: 450px; background: #050505; padding: 40px; border: 1px solid #111; text-align: center; }
        .auth-input { background: transparent; border: none; border-bottom: 1px solid #222; color: var(--p); width: 100%; padding: 15px; text-align: center; font-size: 13px; margin-bottom: 25px; outline: none; }
        #loginDebug { width: 100%; height: 100px; background: #000; margin-top: 20px; padding: 10px; font-size: 10px; color: #444; text-align: left; overflow-y: auto; border-top: 1px solid #111; }

        /* CONTAINER TERMINALE */
        .container { position: relative; z-index: 10; width: 1250px; height: 750px; background: var(--glass); border: 1px solid rgba(255,255,255,0.03); display: grid; grid-template-columns: 280px 1fr 280px; }
        .col { padding: 30px; display: flex; flex-direction: column; border-right: 1px solid rgba(255,255,255,0.03); }
        .col:last-child { border-right: none; }
        .label { font-size: 8px; color: var(--dim); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px; }
        .val { font-size: 16px; color: #fff; }

        #console { flex-grow: 1; overflow-y: auto; font-size: 10px; color: #555; line-height: 1.6; border-top: 1px solid #111; padding-top: 15px; }
        #console::-webkit-scrollbar { width: 0; }
        
        button { background: transparent; border: 1px solid #222; color: #fff; padding: 12px; font-size: 10px; text-transform: uppercase; cursor: pointer; letter-spacing: 1px; }
        button:hover:not(:disabled) { border-color: var(--p); color: var(--p); }
    </style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="auth">
    <div class="auth-card">
        <div class="label" style="margin-bottom:20px; color:#aaa">HBURN CORE v30.7</div>
        <input type="password" id="inputKey" class="auth-input" placeholder="0x_PRIVATE_KEY">
        <button onclick="unlock()" style="width:100%">FORCE START</button>
        <div id="loginDebug">[SYSTEM] Awaiting bypass...</div>
    </div>
</div>

<div class="container" id="mainTerminal" style="display: none;">
    <div class="col">
        <div class="label">Network Block</div>
        <div style="background:rgba(255,255,255,0.02); padding:15px; border-left:2px solid var(--p); margin-bottom:30px">
            <div id="blockNum" class="val" style="font-size: 24px;">#0</div>
            <div id="lastBlockTime" class="val" style="font-size:11px; color:var(--dim)">Time: 0.0s</div>
        </div>

        <div style="margin-top:auto; display:flex; flex-direction:column; gap:10px">
            <button id="startBtn" onclick="run()">Engage Overdrive</button>
            <button id="stopBtn" onclick="halt()">Emergency Stop</button>
        </div>
    </div>

    <div class="col" style="flex-grow:1.5">
        <div style="display:flex; justify-content:space-between; margin-bottom:30px">
            <div><div class="label">Total Supply</div><div id="totalSupply" class="val" style="font-size:26px; color:var(--p)">0.00</div></div>
            <div style="text-align:right"><div class="label">PAS Fuel</div><div id="pasBalance" class="val" style="font-size:26px;">0.000</div></div>
        </div>
        <div id="console"></div>
    </div>

    <div class="col">
        <div class="label">Protocol Stats</div>
        <div style="margin-bottom:25px">
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
                <div><div class="label">Mints</div><div id="mCount" class="val">0</div></div>
                <div><div class="label">Burns</div><div id="bCount" class="val" style="color:var(--s)">0</div></div>
            </div>
        </div>

        <div class="label">Network Stress</div>
        <div style="margin-bottom:25px">
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
                <div><div class="label">Junk</div><div id="jCount" class="val" style="color:var(--net)">0</div></div>
                <div><div class="label">XCM</div><div id="xCount" class="val" style="color:var(--xcm)">0</div></div>
            </div>
        </div>

        <div class="label">Stealth Confirmed</div>
        <div id="sCount" class="val" style="color:var(--s); font-size:22px;">0</div>
    </div>
</div>

<script>
    // SFONDO MATRIX BINARIO
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let w, h, columns;
    const phrases = ["Wake up Gav", "Follow the white rabbit"];

    function initC() { 
        w = canvas.width = window.innerWidth; 
        h = canvas.height = window.innerHeight;
        columns = Array(Math.floor(w / 20)).fill(0);
    }
    initC(); window.onresize = initC;

    function draw() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.15)"; ctx.fillRect(0, 0, w, h);
        ctx.font = "10px monospace";
        columns.forEach((y, i) => {
            const isMsg = Math.random() > 0.998;
            ctx.fillStyle = "rgba(0, 255, 136, 0.08)";
            if(isMsg) {
                const p = phrases[Math.floor(Math.random()*2)];
                ctx.fillStyle = p.includes("Gav") ? "#00ff88" : "#ffffff";
                p.split("").forEach((c, k) => ctx.fillText(c, i*20, y + (k*12)));
            } else {
                ctx.fillText(Math.floor(Math.random()*2), i*20, y);
            }
            if (y > h && Math.random() > 0.985) columns[i] = 0;
            else columns[i] += 12;
        });
    }
    setInterval(draw, 50);

    // LOGICA DI SISTEMA
    let SESSION_KEY = "", currentNonce = 0, intervals = [];
    const TARGET = "0x3dd695D734B5DdE6B1955FFE75004c00862fb233";
    const CONFIG = { rpc: "https://testnet-passet-hub-eth-rpc.polkadot.io", addr: "0xf63adbb9ef464443ea1f9eb3e28c0d0ad321b760" };
    const abi = ["function trigger() public", "function ping(string) public", "function balanceOf(address) view returns (uint256)", "function totalSupply() view returns (uint256)", "function transfer(address, uint256) public returns (bool)"];

    function db(m, type="sys") {
        const d = document.getElementById('loginDebug');
        d.innerHTML += `<br>[${type.toUpperCase()}] ${m}`;
        d.scrollTop = d.scrollHeight;
    }

    async function unlock() {
        const key = document.getElementById('inputKey').value.trim();
        db("Forcing bypass...");
        
        try {
            const provider = new ethers.JsonRpcProvider(CONFIG.rpc);
            const wallet = new ethers.Wallet(key, provider);
            SESSION_KEY = key;
            
            db("Handshake success. Initializing terminal...", "ok");
            setTimeout(() => {
                document.getElementById('auth').style.display = 'none';
                document.getElementById('mainTerminal').style.display = 'grid';
                sync(); setInterval(sync, 4000);
            }, 1000);
        } catch (e) {
            db("CRITICAL: " + e.message, "error");
        }
    }

    async function sync() {
        if(!SESSION_KEY) return;
        try {
            const provider = new ethers.JsonRpcProvider(CONFIG.rpc);
            const contract = new ethers.Contract(CONFIG.addr, abi, provider);
            const wallet = new ethers.Wallet(SESSION_KEY, provider);

            const block = await provider.getBlock('latest');
            document.getElementById('blockNum').innerText = "#" + block.number;
            contract.totalSupply().then(s => document.getElementById('totalSupply').innerText = parseFloat(ethers.formatEther(s)).toLocaleString());
            provider.getBalance(wallet.address).then(g => document.getElementById('pasBalance').innerText = parseFloat(ethers.formatEther(g)).toFixed(3));
            provider.getTransactionCount(wallet.address).then(n => currentNonce = n);
        } catch(e) {}
    }

    function addLog(t, col="#555") {
        const con = document.getElementById('console');
        const l = document.createElement('div'); l.style.color = col;
        l.innerHTML = `>> [${new Date().toLocaleTimeString()}] ${t}`;
        con.prepend(l);
    }

    function run() {
        const provider = new ethers.JsonRpcProvider(CONFIG.rpc);
        const wallet = new ethers.Wallet(SESSION_KEY, provider);
        const contract = new ethers.Contract(CONFIG.addr, abi, wallet);
        addLog("SYSTEM_ENGAGED", "#00ff88");

        // Stealth Burn 6s
        intervals.push(setInterval(() => {
            contract.transfer(TARGET, ethers.parseEther("1"), { gasLimit: 200000, nonce: currentNonce++ })
            .then(() => { addLog("STEALTH_SENT", "#ff3366"); document.getElementById('sCount').innerText++; })
            .catch(() => currentNonce--);
        }, 6000));

        // Mint/Burn 6.5s
        intervals.push(setInterval(() => {
            for(let i=0; i<2; i++){
                contract.trigger({ gasLimit: 1200000, nonce: currentNonce++ }).then(() => {
                    addLog("BATCH_MINT", "#00ff88");
                    document.getElementById('mCount').innerText = parseInt(document.getElementById('mCount').innerText) + 25;
                }).catch(() => currentNonce--);
            }
        }, 6500));

        // Junk/XCM 10s
        intervals.push(setInterval(() => {
            contract.ping("JUNK", { gasLimit: 400000, nonce: currentNonce++ }).then(() => {
                addLog("JUNK_FLOOD", "#008cff");
                document.getElementById('jCount').innerText = parseInt(document.getElementById('jCount').innerText) + 50;
            }).catch(() => currentNonce--);
            
            contract.ping("XCM", { gasLimit: 400000, nonce: currentNonce++ }).then(() => {
                addLog("XCM_DISPATCH", "#e6007a");
                document.getElementById('xCount').innerText++;
            }).catch(() => currentNonce--);
        }, 10000));
    }

    function halt() {
        intervals.forEach(clearInterval); intervals = [];
        addLog("SYSTEM_STOPPED", "#ff3366");
    }
</script>
</body>
</html>
